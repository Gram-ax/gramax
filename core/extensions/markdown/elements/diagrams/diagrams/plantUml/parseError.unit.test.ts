import parseError from "@ext/markdown/elements/diagrams/diagrams/plantUml/parseError";

describe("parseError", () => {
	test("пришла ошибка", () => {
		const incomingData = `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="418px" preserveAspectRatio="none" style="width:592px;height:418px;background:#000000;" version="1.1" viewBox="0 0 592 418" width="592px" zoomAndPan="magnify"><defs/><g><rect fill="#091A27" height="1" style="stroke:#091A27;stroke-width:1;" width="1" x="0" y="0"/><rect fill="#EAE2C9" height="92" style="stroke:#EAE2C9;stroke-width:1;" width="591.4688" x="0" y="0"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="313.0039" x="10" y="26.4014">Add your own dedication into PlantUML</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="10" y="42.6982"></text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157.8418" x="10" y="58.9951">For just $5 per month!</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70.4238" x="10" y="75.292">Details on</text><a href="https://plantuml.com/dedication" target="" title="https://plantuml.com/dedication" xlink:actuate="onRequest" xlink:href="https://plantuml.com/dedication" xlink:show="new" xlink:title="https://plantuml.com/dedication" xlink:type="simple"><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="224.7383" x="84.874" y="75.292">https://plantuml.com/dedication</text></a><image height="93" width="93" x="333.0039" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF0AAABdCAYAAADHcWrDAAADlUlEQVR4Xu2QMbLbQAxDff+b5Rop/yWSVsIAIaBde50ZFK/hPoISXj+/f/0pn+WFg/J+WvoBWvoBWvoBWvoBWvoBWvoBWvoBrNJfr9d2VL4zV47jO7sr4A1GS98M3mC09M3gDUZcOr4lODn4E5OvdvGNkfqKNKelB74izWnpga9Ic5ZKx2IYyscbTx0F7jCUj1kM5eMNRksnPmYxlI83GC2d+JjFUD7eYPw3pWMuw/GVo+YK5V/nipY+zBXKv84VLX2YK5R/nSu+rvQUvJfkKx+zGMrHG4yWTnzMYigfbzBaOvExi6F8vMFYKj3FyVEO/vSE2nXmKWlOSyfzlDSnpZN5SpoTl74LlX9qvotrvqKlb+aar2jpm7nmK6zS30360emu43ySln6Aln4Aq/TrR6sfwLfJwRvMcXy1uzJPSXNaOpmnpDktncxT0pyl0tUxNXfAXMaKr8CdBMyaaOlBjgKzJlp6kKPArAmr9NvCyjHywf/KQW/yT+06zs3HwUR6QO06OehN/qldx7n5OJhID6hdJwe9yT+16zg3HwcJzrHUSVE5eIM5K74C9xkt/aGvwH1GS3/oK3CfYZXuhCoHP4qhfDV3nJV5SprT0sk8Jc1p6WSekuZ8tHTceaejwB2G4zuOoqUTHN9xFC2d4PiOo4hLV8fwLXEcH7+JgVnTrnJwPwFvMFo6cXA/AW8wWjpxcD8BbzDi0vEtcRT44SwH35jjgPsMx1cO3mO0dILjKwfvMVo6wfGVg/cYHy0dP3zynV2Vg29PcTLxWyda+oCTid860dIHnEz81gmr9HeDP8HAnQncT3KUj1nMcWjpBOVjFnMcWjpB+ZjFHAerdDyyA7wxoXbV3HHSuSL2ccC4hu4Cb0yoXTV3nHSuiH0cMK6hu8AbE2pXzR0nnStiHweMNFTh5KROCmYxHN9xFC2d4PiOo2jpBMd3HMVS6fhDDOWnc0Xqp1zz1S18m2jpA9d8dQvfJlr6wDVf3cK3ia8ufZeD38TArAncT3JaOvEdcD/JaenEd8D9JOcrSnfA3B05+MacFMxitHQC3kjALEZLJ+CNBMxiLJWeonLUfMVx/HQX3xiYy2jpwS6+MTCX0dKDXXxjYC4jLn0XTn7qKHDn6S6+Jc7NxwEDP3YHTn7qKHDn6S6+Jc7NxwEDP3YHTn7qKHDn6S6+Jc7Nx0F5Py39AC39AC39AC39AC39AC39AC39AC39AH8BOQ9nx4N43O4AAAAASUVORK5CYII=" y="0"/><rect fill="#FFFFFF" height="205.5625" style="stroke:#FFFFFF;stroke-width:1;" width="591.4688" x="0" y="92"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="153.9141" x="5" y="108.1387">Welcome to PlantUML!</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.8145" x="5" y="122.1074"></text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="277.1074" x="5" y="136.0762">You can start with a simple UML Diagram like:</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.8145" x="5" y="150.0449"></text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="122.8184" x="5" y="164.0137">Bob-&gt;Alice:Hello</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.8145" x="5" y="177.9824"></text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="14.3789" x="5" y="191.9512">Or</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.8145" x="5" y="205.9199"></text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="93.9199" x="5" y="219.8887">classExample</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.8145" x="5" y="233.8574"></text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="341.9531" x="5" y="247.8262">You will find more information about PlantUML syntax on</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" text-decoration="underline" textLength="125.7012" x="350.7676" y="247.8262">https://plantuml.com</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.8145" x="5" y="261.7949"></text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="106.6113" x="5" y="275.7637">(Details by typing</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="50.5723" x="115.4258" y="275.7637">license</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="55.8223" x="169.8125" y="275.7637">keyword)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.8145" x="5" y="289.7324"></text><image height="71" width="80" x="505.4688" xlink:href="data:image/png;base64,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" y="98"/><rect fill="#000000" height="118.4531" style="stroke:#000000;stroke-width:1;" width="591.4688" x="0" y="297.5625"/><text fill="#33FF02" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="166.9219" x="5" y="314.5625">PlantUML 1.2024.9beta6</text><rect fill="#33FF02" height="21.2969" style="stroke:#33FF02;stroke-width:1;" width="173.2813" x="5" y="324.5313"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="171.2813" x="6" y="339.5313">[From string (line 2) ]</text><text fill="#33FF02" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="4.874" x="5" y="359.8281"></text><text fill="#33FF02" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="81.4229" x="5" y="376.125">@startuml</text><text fill="#33FF02" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" text-decoration="wavy underline" textLength="50.1074" x="5" y="392.4219">qqqqq</text><text fill="#FF0000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="107.2354" x="9.874" y="408.7188">Syntax Error?</text><!--SRC=[Aom40W00]--></g></svg>`;
		const parsedData = parseError(incomingData);
		const expectedData = `
PlantUML 1.2024.9beta6

[From string (line 2) ]

@startuml
qqqqq
Syntax Error?`;

		expect(parsedData).toEqual(expectedData);
	});

	test("пришла диаграмма", () => {
		const incomingData = `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="120px" preserveAspectRatio="none" style="width:117px;height:120px;background:#FFFFFF;" version="1.1" viewBox="0 0 117 120" width="117px" zoomAndPan="magnify"><defs/><g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="25" x2="25" y1="36.2969" y2="85.4297"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="86.8569" x2="86.8569" y1="36.2969" y2="85.4297"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="41.0566" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.0566" x="12" y="24.9951">Bob</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="41.0566" x="5" y="84.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.0566" x="12" y="104.4248">Bob</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47.667" x="63.8569" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33.667" x="70.8569" y="24.9951">Alice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47.667" x="63.8569" y="84.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33.667" x="70.8569" y="104.4248">Alice</text><polygon fill="#181818" points="75.6904,63.4297,85.6904,67.4297,75.6904,71.4297,79.6904,67.4297" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="25.5283" x2="81.6904" y1="67.4297" y2="67.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="38.1621" x="32.5283" y="62.3638">Hello!</text><!--SRC=[SyfFKj2rKt3CoKnEjLBmICt9oLS40000]--></g></svg>`;
		const parsedData = parseError(incomingData);
		const expectedData = undefined;

		expect(parsedData).toEqual(expectedData);
	});

	test("пришла пустая строка", () => {
		const incomingData = "";
		const parsedData = parseError(incomingData);
		const expectedData = undefined;

		expect(parsedData).toEqual(expectedData);
	});
});
